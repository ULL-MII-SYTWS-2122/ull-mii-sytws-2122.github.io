<!doctype html>
<html lang=" en-US ">

<head>
    <meta charset="utf-8">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=996b159efabe167f02c817e49d6bd114cbe3e251">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="/assets/js/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="/assets/css/ie.css">
    <![endif]-->

    
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        
    
</head>

<body>
    <div id="header">
            <nav>
    <ul>
        <li><a href="https://github.com/ULL-MII-SYTWS/ull-mii-sytws.github.io-source/tree/main//tema1-introduccion/gh.md" title="Edit this page at GitHub">üêô</a>
        </li>
        <li><a href="/search" title="search">&#x1F50D;</a></li>
        <li><a href="/resources.html" title="resources">&#x2699</a></li>
        <li><a href="/timetables.html" title="horarios">&#x1f5d3</a></li>
        <li><a href="/references.html" title="bibliografia">&#x1f4da</a></li>
        <li><a href="/practicas.html" title="pr√°cticas">&#x270d</a></li>
        <li><a href="/clases.html" title="clases">üë®‚Äçüè´</a></li>
        <li><a href="/index.html" title="Home page">&#x1f3e0</a></li>
        <li><a href="/tema0-presentacion/" title="Tema 0: Presentaci√≥n">0</a></li>
        <li><a href="/tema1-introduccion/" title="Tema 1: introducci√≥n">1</a></li>
        <li><a href="/tema2-async/" title="Tema 2: Async">2</a></li>
        <li><a href="/tema3-web/" title="Tema 3: Web">3</a></li>
        <li><a href="/tema4-devops/" title="Tema 4: Devops">4</a></li>
        
    </ul>
    </nav>

    </div>
    <!-- end header -->


    <div class="wrapper">

        <section>
           
<div id="title">
        <h1>Sistemas y Tecnolog√≠as Web: Servidor</h1>
        <p> Master de II. ULL. 1er cuatrimestre</p>
        <hr>
        <span class="credits left">Organization <a href="https://github.com/ULL-MII-SYTWS-2122" target="_blank">ULL-MII-SYTWS-2122</a></span>
        <span class="credits left"> &nbsp; Classroom <a href="https://classroom.github.com/classrooms/90842007-ull-mii-sytws-2122" target="_blank">ULL-MII-SYTWS-2122</a></span>
        <span class="credits left"> &nbsp; Campus Virtual <a href="https://campusdoctoradoyposgrado2122.ull.es/course/view.php?id=2122110810" target="_blank">SYTWS</a></span>
        <span class="credits left"> &nbsp; Chat <a href="https://chat.google.com/u/1/room/AAAAp18fCE8" target="_blank">Chat</a></span>
        <span class="credits left"> &nbsp; Profesor <a href="https://www.ull.es/apps/guias/guias/view_teacher_niu/837/crguezl/" target="_blank">Casiano</a></span>
    </div>

<!--

<div id="title">
    <h1>Sistemas y Tecnolog√≠as Web: Servidor</h1>
    <p> Master de II. ULL. 1er cuatrimestre</p>
    <hr>
    <span class="credits left">Organization <a href="https://github.com/ULL-MII-SYTWS"
            target="_blank">ULL-MII-SYTWS</a></span>
    <span class="credits left"> &nbsp; Github Classroom <a
            href="https://classroom.github.com/classrooms/55384072-master-de-ingenieria-informatica-sistemas-y-tecnologias-web-servidor-classroom"
            target="_blank">SYTWS 19/20</a></span>
    <span class="credits left"> &nbsp; Campus Virtual <a
            href="https://campusvirtual.ull.es/1920/course/view.php?id=201913778" target="_blank">SYTWS
            19/20</a></span>
    <span class="credits left"> &nbsp; Profesor <a
            href="https://www.ull.es/apps/guias/guias/view_teacher_niu/588/(%3FPcrguezl.*)/"" target="
            _blank">Casiano</a></span>
</div>
-->    


           
            <h2 >Table of Contents</h2>
           
            <ul id="sytwstoc">
  <li><a href="#introduction">Introduction</a>
    <ul>
      <li><a href="#what-is">What is</a></li>
      <li><a href="#version">Version</a></li>
      <li><a href="#help">Help</a></li>
      <li><a href="#installation">Installation</a></li>
    </ul>
  </li>
  <li><a href="#option-json">Option ‚Äìjson</a></li>
  <li><a href="#introduction-to-gh-api">Introduction to <code class="language-plaintext highlighter-rouge">gh api</code></a>
    <ul>
      <li><a href="#authentication-token">Authentication Token</a></li>
      <li><a href="#example-issues-of-a-repo">Example: Issues of a repo</a></li>
      <li><a href="#post-example">POST Example</a></li>
      <li><a href="#pagination">Pagination</a></li>
      <li><a href="#templates-for-the-output">Templates for the output</a></li>
    </ul>
  </li>
  <li><a href="#introduction-to-gh-alias">Introduction to <code class="language-plaintext highlighter-rouge">gh alias</code></a>
    <ul>
      <li><a href="#simple-examples">Simple Examples</a></li>
      <li><a href="#example-search-for-members-of-an-organization">Example search for members of an organization</a></li>
      <li><a href="#example-search-for-repos-inside-an-organization">Example: Search for repos inside an organization</a></li>
    </ul>
  </li>
  <li><a href="#graphql-examples">GraphQL Examples</a>
    <ul>
      <li><a href="#example-number-of-repos-in-an-organization">Example: Number of repos in an Organization</a></li>
      <li><a href="#getting-my-repos">Getting my repos</a></li>
      <li><a href="#example-getting-issues">Example: Getting issues</a></li>
      <li><a href="#mutation-example">Mutation Example</a></li>
    </ul>
  </li>
  <li><a href="#extensions">Extensions</a>
    <ul>
      <li><a href="#example-of-an-extension-gh-clone-org">Example of an extension: gh-clone-org</a></li>
    </ul>
  </li>
  <li><a href="#running-manually-github-workflows-with-gh">Running Manually GitHub Workflows with gh</a></li>
  <li><a href="#pr√°cticas">Pr√°cticas</a></li>
  <li><a href="#references">References</a></li>
</ul>
        
            <h1> GitHub Command Line Interface </h1>
            <div class="container">
                <h2 id="introduction">Introduction</h2>

<h3 id="what-is">What is</h3>

<p><a href="https://cli.github.com/manual/">gh</a> pretends to facilitate the access to GitHub from the command line. It brings pull requests, issues, and other GitHub concepts to the terminal next to where you are already working with git and your code.</p>

<h3 id="version">Version</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>‚ûú  apuntes git:(main) gh --version
gh version 2.0.0 (2021-08-23)
https://github.com/cli/cli/releases/tag/v2.0.0
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="help">Help</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
</pre></td><td class="rouge-code"><pre>‚ûú  apuntes git:(main) ‚úó gh help
Work seamlessly with GitHub from the command line.

USAGE
  gh &lt;command&gt; &lt;subcommand&gt; [flags]

CORE COMMANDS
  browse:     Open the repository in the browser
  gist:       Manage gists
  issue:      Manage issues
  pr:         Manage pull requests
  release:    Manage GitHub releases
  repo:       Create, clone, fork, and view repositories

ACTIONS COMMANDS
  actions:    Learn about working with GitHub actions
  run:        View details about workflow runs
  workflow:   View details about GitHub Actions workflows

ADDITIONAL COMMANDS
  alias:      Create command shortcuts
  api:        Make an authenticated GitHub API request
  auth:       Login, logout, and refresh your authentication
  completion: Generate shell completion scripts
  config:     Manage configuration for gh
  extension:  Manage gh extensions
  help:       Help about any command
  secret:     Manage GitHub secrets
  ssh-key:    Manage SSH keys

EXTENSION COMMANDS
  clone-org
  gp
  project

FLAGS
  --help      Show help for command
  --version   Show gh version

EXAMPLES
  $ gh issue create
  $ gh repo clone cli/cli
  $ gh pr checkout 321

ENVIRONMENT VARIABLES
  See 'gh help environment' for the list of supported environment variables.

LEARN MORE
  Use 'gh &lt;command&gt; &lt;subcommand&gt; --help' for more information about a command.
  Read the manual at https://cli.github.com/manual

FEEDBACK
  Open an issue using 'gh issue create -R github.com/cli/cli'
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="installation">Installation</h3>

<p>To install it, see  the <a href="https://github.com/cli/cli#installation">installation instructions</a>.</p>

<p>Check the <a href="https://cli.github.com/manual/">GitHub CLI Manual</a> for more details.</p>

<p>There are several ways you can extend/customize <code class="language-plaintext highlighter-rouge">gh</code>:</p>

<ul>
  <li>Create shorthands using <a href="https://cli.github.com//manual/gh_alias_set"><code class="language-plaintext highlighter-rouge">gh alias set</code></a></li>
  <li>Make custom API queries using <a href="https://cli.github.com//manual/gh_api"><code class="language-plaintext highlighter-rouge">gh api</code></a></li>
  <li>Use <a href="https://cli.github.com//manual/gh_help_environment">environment variables</a></li>
</ul>

<h2 id="option-json">Option ‚Äìjson</h2>

<p>Some gh commands support exporting the data as JSON as an alternative to their usual line-based plain text output.</p>

<p>This is suitable for passing structured data to scripts. The JSON output is enabled with the <code class="language-plaintext highlighter-rouge">--json</code> option, followed by the list of fields to fetch.</p>

<p>Use the flag without a value to get the list of available fields.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="rouge-code"><pre>[~/campus-virtual/2122/learning/graphql-learning(main)]$ gh issue list

Showing 2 of 2 open issues in crguezl/learning-graphql-with-gh

#2  second issue        about 6 days ago
#1  First test issue    about 6 days ago
[~/campus-virtual/2122/learning/graphql-learning(main)]$ gh issue list --json
Specify one or more comma-separated fields for `--json`:
  assignees
  author
  body
  closed
  closedAt
  comments
  createdAt
  id
  labels
  milestone
  number
  projectCards
  reactionGroups
  state
  title
  updatedAt
  url
</pre></td></tr></tbody></table></code></pre></div></div>

<p>If we specify a list of comma separated fields we get those fields in JSON format:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>[~/campus-virtual/2122/learning/graphql-learning(main)]$ gh issue list --json number,title,body
[
  {
    "body": "second",
    "number": 2,
    "title": "second issue"
  },
  {
    "body": "üíØ  bien!",
    "number": 1,
    "title": "First test issue"
  }
]
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="introduction-to-gh-api">Introduction to <code class="language-plaintext highlighter-rouge">gh api</code></h2>

<ul>
  <li><a href="https://cli.github.com/manual/gh_api">Manual de gh api</a></li>
</ul>

<h3 id="authentication-token">Authentication Token</h3>

<ul>
  <li><a href="https://cli.github.com/manual/gh_auth">Manual de gh auth</a>
    <ul>
      <li><a href="https://cli.github.com/manual/gh_auth_login">Manual de gh auth login</a></li>
    </ul>
  </li>
</ul>

<p>Go to <a href="https://github.com/settings/tokens">github.com/settings/tokens</a>
to generate a new token for <code class="language-plaintext highlighter-rouge">gh</code> and set then environment variable 
<code class="language-plaintext highlighter-rouge">GITHUB_TOKEN</code> (<code class="language-plaintext highlighter-rouge">export GITHUB_TOKEN= ...</code>)</p>

<p>Para generar el token:</p>

<p><a href="https://github.com/settings/tokens">user -&gt; settings -&gt; developer settings -&gt; Personal access tokens</a></p>

<p>o mas r√°pido vete a <a href="https://github.com/settings/tokens">https://github.com/settings/tokens</a></p>

<p>Una vez se tiene un token:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre># authenticate against github.com by reading the token from a file
$ gh auth login --with-token &lt; mytoken.txt
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Tambi√©n es posible autenticarse con el browser usando la opci√≥n <code class="language-plaintext highlighter-rouge">-w</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>‚ûú  graphql-examples git:(main) ‚úó gh auth login -w

! First copy your one-time code: F4D5-59E6
- Press Enter to open github.com in your browser...
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Esto abre el browser, nos pide la contrase√±a que aparece arriba</p>

<p><img src="/assets/images/gh-auth-browser-1.png" alt="" /></p>

<p>y nos pide confirmar los permisos.</p>

<p><img src="/assets/images/gh-auth-browser-2.png" alt="" /></p>

<h3 id="example-issues-of-a-repo">Example: Issues of a repo</h3>

<p>Placeholder values <code class="language-plaintext highlighter-rouge">:owner</code>, <code class="language-plaintext highlighter-rouge">:repo</code>, and <code class="language-plaintext highlighter-rouge">:branch</code> in the endpoint argument will get replaced with values from the repository of the current directory.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre>$  gh api repos/:owner/:repo/issues
[
  {
    "url": "https://api.github.com/repos/ULL-MII-SYTWS-1920/ull-mii-sytws-1920.github.io/issues/5",
    "repository_url": "https://api.github.com/repos/ULL-MII-SYTWS-1920/ull-mii-sytws-1920.github.io",
    "labels_url": "https://api.github.com/repos/ULL-MII-SYTWS-1920/ull-mii-sytws-1920.github.io/issues/5/labels{/name}",
    "comments_url": "https://api.github.com/repos/ULL-MII-SYTWS-1920/ull-mii-sytws-1920.github.io/issues/5/comments",
    "events_url": "https://api.github.com/repos/ULL-MII-SYTWS-1920/ull-mii-sytws-1920.github.io/issues/5/events",
    "html_url": "https://github.com/ULL-MII-SYTWS-1920/ull-mii-sytws-1920.github.io/issues/5",
    "id": 715027457,
    "node_id": "MDU6SXNzdWU3MTUwMjc0NTc=",
    "number": 5,
    "title": "tema0-presentacion/practicas/pb-gh-campus-expert/",
    "user": {
      ...
    }
    ...
  }
]
</pre></td></tr></tbody></table></code></pre></div></div>

<p>We can pipe the output to <a href="jq">jq</a> or use the <a href="https://cli.github.com/manual/gh_api"><code class="language-plaintext highlighter-rouge">-q</code> or <code class="language-plaintext highlighter-rouge">--jq</code> option of <code class="language-plaintext highlighter-rouge">gh api</code></a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>$  gh api repos/:owner/:repo/issues | jq '.[0] | .title'
"tema0-presentacion/practicas/pb-gh-campus-expert/"
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Of course, we can explicit the repo and owner. For example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>‚ûú gh api repos/ULL-MII-SYTWS-2021/p01-t1-iaas-alu0101040882/issues | jq '.[0] | .user.login, .body'
"crguezl"
"Hola @alu0101040882, \r\n\r\nVeo que alguno ya est√° trabajando en la pr√°ctica de
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="post-example">POST Example</h3>

<p>Let us see an example using the <code class="language-plaintext highlighter-rouge">POST</code> method. We will start from this <code class="language-plaintext highlighter-rouge">curl</code> example 
in the <a href="https://docs.github.com/en/free-pro-team@latest/rest/guides/getting-started-with-the-rest-api#repositories">GitHub API getting started guide</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>$ curl -i -H "Authorization: token 5199831f4dd3b79e7c5b7e0ebe75d67aa66e79d4" \
    -d '{ \
        "name": "blog", \
        "auto_init": true, \
        "private": true, \
        "gitignore_template": "nanoc" \
      }' \
    https://api.github.com/user/repos
</pre></td></tr></tbody></table></code></pre></div></div>

<p>and let us adapt to <code class="language-plaintext highlighter-rouge">gh api</code>. We use <code class="language-plaintext highlighter-rouge">-X</code> or <code class="language-plaintext highlighter-rouge">--method string</code>to set the HTTP method for the request (default <code class="language-plaintext highlighter-rouge">GET</code>) and <code class="language-plaintext highlighter-rouge">-f</code>to set the fields:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>‚ûú  /tmp gh api -X POST -f name=repo-prueba-gh-api -f private=true /user/repos
</pre></td></tr></tbody></table></code></pre></div></div>

<p>This way we have created a private repo inside the user scope:</p>

<p><img src="/assets/images/gh-api-post-create-repo.png" alt="" /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>‚ûú  input-option git:(master) ‚úó gh repo-delete crguezl/repo-prueba-gh-api
‚ûú  input-option git:(master) ‚úó gh api -f name=repo-prueba-gh-api -f private=true /user/repos
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="pagination">Pagination</h3>

<p>The option <code class="language-plaintext highlighter-rouge">--paginate</code>allow us to make additional HTTP requests to fetch 
all pages of results. Here is an example.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>‚ûú  gh alias set get-repos 'api /orgs/$1/repos'
- Adding alias for get-repos: api /orgs/$1/repos
‚úì Added alias.
‚ûú  gh alias list
co:         pr checkout
get-repos:  api /orgs/$1/repos
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>‚ûú gh get-repos ULL-MII-SYTWS-2021
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="/assets/images/gh-alias-repos.png" alt="" /></p>

<p>Now  we can pipe the output to <a href="jq">jq</a> to get the names of the repos:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>‚ûú  gh get-repos ULL-MII-SYTWS-2021 | jq '.[].full_name' -
"ULL-MII-SYTWS-2021/sytws-2021-meta"
"ULL-MII-SYTWS-2021/sytws2021-private"
"ULL-MII-SYTWS-2021/books-shared"
"ULL-MII-SYTWS-2021/p01-t1-iaas-fcohdezc"
"ULL-MII-SYTWS-2021/p01-t1-iaas-crguezl"
"ULL-MII-SYTWS-2021/p01-t1-iaas-alu0100886870"
...
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Let ask for the repos in the PL organization for the course 19/20:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>‚ûú gh api /orgs/ULL-ESIT-PL-1920/repos | jq '.[] | .name' | wc
      30      30    1088
</pre></td></tr></tbody></table></code></pre></div></div>
<p>It gave us 30 repos. There are much more than that in that organization.</p>

<p>If we use <code class="language-plaintext highlighter-rouge">--paginate</code> the request takes a long time and gives us near a thousand repos:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>‚ûú gh api --paginate /orgs/ULL-ESIT-PL-1920/repos | jq '.[] | .name' | wc
     990     990   32868
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="templates-for-the-output">Templates for the output</h3>

<p>The option <code class="language-plaintext highlighter-rouge">-t, --template string</code>of <code class="language-plaintext highlighter-rouge">gh api</code>
allows to format the response using a <a href="https://pkg.go.dev/text/template">Go template</a>.</p>

<p>Here is an example of template:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>‚ûú  gh-learning git:(master) ‚úó cat template.gotemplate
Title: {{range .}}{{.title}}
Labels: ({{.labels | pluck "name" | join ", " | color "yellow"}})
Body: {{.body}}
{{end}}
</pre></td></tr></tbody></table></code></pre></div></div>

<p>and let us use it:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>‚ûú  gh-learning git:(master) ‚úó gh api repos/crguezl/learning-bash/issues --template "$(cat template.gotemplate)"
Title: issue de prueba
Labels: (bug, documentation, duplicate, enhancement, help wanted, good first issue, invalid, question)
Body: üëç  blah ...
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">Labels</code> appear in yellow.</p>

<ul>
  <li>V√©ase <a href="https://cli.github.com/manual/gh_help_formatting">gh formatting</a></li>
</ul>

<h2 id="introduction-to-gh-alias">Introduction to <code class="language-plaintext highlighter-rouge">gh alias</code></h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>‚ûú gh alias set &lt;alias&gt; &lt;expansion&gt; [flags]
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Declare a word as a command alias that will expand to the specified command(s).</p>

<p>The expansion may specify additional arguments and flags. If the expansion
includes positional placeholders such as <code class="language-plaintext highlighter-rouge">$1</code>, <code class="language-plaintext highlighter-rouge">$2</code>, etc., any extra arguments
that follow the invocation of an alias will be inserted appropriately.</p>

<p>If <code class="language-plaintext highlighter-rouge">--shell</code> is specified, the alias will be run through a shell interpreter (sh). This allows you
to compose commands with <code class="language-plaintext highlighter-rouge">|</code> or redirect with <code class="language-plaintext highlighter-rouge">&gt;</code>. Note that extra arguments following the alias
will not be automatically passed to the expanded expression. To have a shell alias receive
arguments, you must explicitly accept them using <code class="language-plaintext highlighter-rouge">$1</code>, <code class="language-plaintext highlighter-rouge">$2</code>, etc., or <code class="language-plaintext highlighter-rouge">$@</code> to accept all of them.</p>

<p>Platform note: on Windows, shell aliases are executed via <code class="language-plaintext highlighter-rouge">sh</code> as installed by Git For Windows. If
you have installed git on Windows in some other way, shell aliases may not work for you.</p>

<p>Quotes must always be used when defining a command as in the examples.</p>

<h3 id="simple-examples">Simple Examples</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>  $ gh alias set pv 'pr view'
  $ gh pv -w 123
  #=&gt; gh pr view -w 123

  $ gh alias set bugs 'issue list --label="bugs"'

  $ gh alias set epicsBy 'issue list --author="$1" --label="epic"'
  $ gh epicsBy vilmibm
  #=&gt; gh issue list --author="vilmibm" --label="epic"

  $ gh alias set --shell igrep 'gh issue list --label="$1" | grep $2'
  $ gh igrep epic foo
  #=&gt; gh issue list --label="epic" | grep "foo"
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="example-search-for-members-of-an-organization">Example search for members of an organization</h3>

<p>Este request nos da un JSON con informacion sobre los miembros de una org:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>gh alias set org-members api --paginate "/orgs/$1/members"
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Por ejemplo:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre>‚úó gh org-members ULL-MII-SYTWS-2122 | jq '.[] | .url, .id, .login'
"https://api.github.com/users/alu0100898293"
22496375
"alu0100898293"
"https://api.github.com/users/alu0101102726"
37936358
"alu0101102726"
"https://api.github.com/users/crguezl"
1142554
"crguezl"
"https://api.github.com/users/PaulaExposito"
56047765
"PaulaExposito"
"https://api.github.com/users/Pmolmar"
45513418
"Pmolmar"
</pre></td></tr></tbody></table></code></pre></div></div>

<p>A partir de este alias podemos construir sub-alias:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>‚úó gh alias set my-orgs-names --shell "gh my-orgs --jq '.[].organization.login'"
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="example-search-for-repos-inside-an-organization">Example: Search for repos inside an organization</h3>

<p>Let us search for repos inside our organization using GitHub API v3:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>‚ûú gh api '/search/repositories?q=iaas+org:ULL-MII-SYTWS-2021+in:name'
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="/assets/images/gh-api-search-for-repos.png" alt="" /></p>

<p>Here is <a href="/tema1-introduccion/gh-get-labs-output.json">the JSON with the full output</a>.</p>

<ul>
  <li>See the <a href="https://docs.github.com/en/free-pro-team@latest/rest/reference/search">SEARCH</a>
section of the REST API GitHub docs to know more about the API.</li>
  <li>See section <a href="https://docs.github.com/en/free-pro-team@latest/rest/reference/search#search-repositories">Search Repositories</a> for more info on how to search for repos</li>
</ul>

<p>Now we can use <code class="language-plaintext highlighter-rouge">gh alias set</code> to make an alias <code class="language-plaintext highlighter-rouge">get-lab</code> to get the repos:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>‚ûú gh alias set get-labs 'api /search/repositories?q=$2+org:$1+in:name'
- Adding alias for get-labs: api /search/repositories?q=$2+org:$1+in:name
‚úì Added alias.
‚ûú  gh alias list
co:        pr checkout
get-labs:  api /search/repositories?q=$2+org:$1+in:name
</pre></td></tr></tbody></table></code></pre></div></div>

<p>And now we can use it:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>‚ûú gh get-labs ULL-MII-SYTWS-2021 iaas
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Next  we can pipe the output to <a href="jq">jq</a> to get the names of the repos and the date of the last push:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>‚ûú gh get-labs ULL-MII-SYTWS-2021 iaas | jq '.items[] | .name, .pushed_at'
"p01-t1-iaas-juanchojbarroso"
"2020-10-21T15:58:32Z"
"p01-t1-iaas-alu0101040882"
"2020-10-17T16:53:39Z"
"p01-t1-iaas-fcohdezc"
"2020-10-06T17:51:52Z"
"p01-t1-iaas-crguezl"
"2020-10-19T13:50:13Z"
"p01-t1-iaas-alu0100886870"
"2020-10-21T17:05:08Z"
"p01-t1-iaas-lardabi"
"2020-10-06T18:01:16Z"
</pre></td></tr></tbody></table></code></pre></div></div>
<p>We can improve it by writing a script:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>‚ûú  cat ~/bin/repos
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="nv">ORG</span><span class="o">=</span>ULL-MII-SYTWS-2021
<span class="nv">ASSIGNMENT</span><span class="o">=</span>iaas
<span class="k">if</span> <span class="o">[[</span> <span class="nv">$# </span><span class="nt">-gt</span> 0 <span class="o">]]</span> <span class="p">;</span> <span class="k">then
  </span><span class="nv">ASSIGNMENT</span><span class="o">=</span><span class="nv">$1</span>
<span class="k">fi
if</span> <span class="o">[[</span> <span class="nv">$# </span><span class="nt">-gt</span> 1 <span class="o">]]</span> <span class="p">;</span> <span class="k">then
    </span><span class="nv">ORG</span><span class="o">=</span><span class="nv">$2</span>
<span class="k">fi</span>
<span class="c"># echo $ASSIGNMENT $ORG</span>
gh api <span class="nt">--paginate</span> /search/repositories?q<span class="o">=</span><span class="nv">$ASSIGNMENT</span>+org:<span class="nv">$ORG</span>+in:name |
                          jq <span class="s1">'.items[] | .name, .pushed_at'</span>           |
                          <span class="nb">sed</span> <span class="s1">'N;s/\n/ =&gt; /'</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Let us make an alias for <code class="language-plaintext highlighter-rouge">gh</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>‚ûú gh alias set --shell get-repos 'repos $1 $2'
- Adding alias for get-repos: repos $1 $2
‚úì Changed alias get-repos from !repos to !repos $1 $2
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Watch the use of single quotes.</p>

<p>Let us use our new alias:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>‚ûú  apuntes git:(curso2021) gh get-repos TFA ULL-ESIT-PL-1920
"tfa-module-miguel-tfa" =&gt; "2020-09-04T09:40:57Z"
"tfa-daniel-tfa" =&gt; "2020-06-02T14:00:30Z"
"tfa-manuel-jorge-tfa" =&gt; "2020-09-13T21:40:24Z"
"tfa-basilio-tfa" =&gt; "2020-07-14T06:49:29Z"
"tfa-alien-tfa" =&gt; "2020-09-05T07:35:52Z"
"tfa-miguel-angel-tfa" =&gt; "2020-09-15T13:19:47Z"
"tfa-esther-sergio-tfa" =&gt; "2020-07-10T08:53:04Z"
...
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="graphql-examples">GraphQL Examples</h2>

<p><strong>GraphQL</strong> is a query language for web services APIs and a runtime for fulfilling those queries with your existing data. GraphQL provides a complete and understandable description of the data in your API, gives clients the power to ask for exactly what they need and nothing more.</p>

<h3 id="example-number-of-repos-in-an-organization">Example: Number of repos in an Organization</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>gh api graphql --paginate --field query=@org-num-repos.gql --jq .data.organization.repositories.totalCount
</pre></td></tr></tbody></table></code></pre></div></div>

<p>These are the contents of the file <code class="language-plaintext highlighter-rouge">org-num-repos.gql</code>:</p>

<pre><code class="language-GraphQL">query {
  organization(login: "ULL-MII-SYTWS-2122") {
    repositories {
      totalCount
    }
  }
}
</code></pre>

<p>Execution:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>‚úó source org-num-repos.bash 
17
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="getting-my-repos">Getting my repos</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>‚ûú  graphql-learning git:(main) ‚úó gh config set pager cat
‚ûú  graphql-learning git:(main) ‚úó cat my-repos.bash
gh api graphql --paginate -F number_of_repos=3 --field query=@my-repos.gql
</pre></td></tr></tbody></table></code></pre></div></div>

<p>In this example <code class="language-plaintext highlighter-rouge">$number_of_repos</code> is a variable that is set to <code class="language-plaintext highlighter-rouge">3</code> inside the command using the option <code class="language-plaintext highlighter-rouge">-F number_of_repos=3</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>‚ûú  graphql-learning git:(main) ‚úó cat my-repos.gql 

query($number_of_repos:Int!){
  viewer {
    name
     repositories(last: $number_of_repos) {
       nodes {
         name
       }
     }
   }
}
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Here is the output of an execution:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>‚ûú  graphql-learning git:(main) ‚úó gh api graphql --paginate -F number_of_repos=3 --field query=@my-repos.gql
</pre></td></tr></tbody></table></code></pre></div></div>

<pre><code class="language-GraphQL">{
  "data": {
    "viewer": {
      "name": "Casiano Rodriguez-Leon",
      "repositories": {
        "nodes": [
          {
            "name": "asyncmap-crguezl"
          },
          {
            "name": "gh-clone-org"
          },
          {
            "name": "learning-graphql-with-gh"
          }
        ]
      }
    }
  }
}
</code></pre>

<h3 id="example-getting-issues">Example: Getting issues</h3>

<p>Follows an example of query using GraphQL (see <a href="https://docs.github.com/en/graphql/guides/forming-calls-with-graphql#example-query">The Example query in GitHub Docs</a>).</p>

<p>We can set the GraphQL query in a separated file:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>‚ûú  bin git:(master) cat gh-api-example.graphql
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="k">query</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">repository</span><span class="p">(</span><span class="n">owner</span><span class="p">:</span><span class="s2">"ULL-MII-SYTWS-2021"</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="s2">"p01-t1-iaas-alu0101040882"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">issues</span><span class="p">(</span><span class="n">last</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">states</span><span class="p">:</span><span class="n">OPEN</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">edges</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">node</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="n">title</span><span class="w">
          </span><span class="n">url</span><span class="w">
          </span><span class="n">labels</span><span class="p">(</span><span class="n">first</span><span class="p">:</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">edges</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="n">node</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="n">name</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>To learn more, see the tutorial <a href="https://docs.github.com/en/free-pro-team@latest/graphql/guides/forming-calls-with-graphql">Forming calls with GraphQL
</a>.</p>

<p>Looking at the composition line by line:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>query {
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Because we want to read data from the server, not modify it, <code class="language-plaintext highlighter-rouge">query</code> is the <strong>root operation</strong>. (If you don‚Äôt specify an operation, <code class="language-plaintext highlighter-rouge">query</code> is also the default.)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>repository(owner:"ULL-MII-SYTWS-2021", name:"p01-t1-iaas-alu0101040882") 
</pre></td></tr></tbody></table></code></pre></div></div>

<p>To begin the query, we want to find a <a href="https://docs.github.com/en/free-pro-team@latest/v4/object/repository">repository object</a>.</p>

<p>The <code class="language-plaintext highlighter-rouge">schema</code> validation indicates this object requires</p>
<ul>
  <li>an <code class="language-plaintext highlighter-rouge">owner</code></li>
  <li>and a <code class="language-plaintext highlighter-rouge">name</code> argument.</li>
</ul>

<p>A <code class="language-plaintext highlighter-rouge">schema</code> defines a <strong>GraphQL API‚Äôs type system</strong>. It describes the complete set of possible data (objects, fields, relationships, everything) that a client can access</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>issues(last:2, states:OPEN) {
</pre></td></tr></tbody></table></code></pre></div></div>

<p>A <strong>field</strong> is a unit of data you can retrieve from an object. As the official GraphQL docs say: <em>The GraphQL query language is basically about selecting fields on objects</em>.</p>

<p>To account for all issues in the repository, we call the <code class="language-plaintext highlighter-rouge">issues</code> object.</p>

<p>Some details about the <code class="language-plaintext highlighter-rouge">issues</code> object:</p>

<p>The docs tell us this object has the type <a href="https://docs.github.com/en/free-pro-team@latest/graphql/reference/objects#issueconnection">IssueConnection</a>.</p>

<p>Schema validation indicates this object requires a <code class="language-plaintext highlighter-rouge">last</code> or <code class="language-plaintext highlighter-rouge">first</code> number of results as an argument, so we provide <code class="language-plaintext highlighter-rouge">2</code>.</p>

<p>The docs also tell us this object accepts a <code class="language-plaintext highlighter-rouge">states</code> argument, which is an <code class="language-plaintext highlighter-rouge">IssueState</code> enum that accepts <code class="language-plaintext highlighter-rouge">OPEN</code> or <code class="language-plaintext highlighter-rouge">CLOSED</code> values.</p>

<p>To find only open issues, we give the states key a value of <code class="language-plaintext highlighter-rouge">OPEN</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>edges {
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>Edges</strong> represent connections between nodes. When you query a <strong>connection</strong>, you traverse its edges to get to its nodes.</p>

<p>We know <strong>issues</strong> is a *connection** because the Doc says it has the <code class="language-plaintext highlighter-rouge">IssueConnection</code> type.</p>

<p><strong>Connections</strong> let us query related objects as part of the same call. With connections, we can use a single GraphQL call where we would have to use multiple calls to a REST API.</p>

<p>To retrieve data about individual issues, we have to access the node via edges.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>node {
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Here we retrieve the node at the end of the edge. 
The <a href="https://docs.github.com/en/free-pro-team@latest/v4/object/issueconnection">IssueConnection docs</a> indicate the node at the end of the <code class="language-plaintext highlighter-rouge">IssueConnection</code> type is an <code class="language-plaintext highlighter-rouge">Issue</code> object.</p>

<p>Now that we know we‚Äôre retrieving an <code class="language-plaintext highlighter-rouge">Issue</code> object, we can look at the <a href="https://docs.github.com/en/free-pro-team@latest/graphql/reference/objects#issue">docs for issue</a>  and specify the fields we want to return:</p>

<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="err">title</span><span class="w">
</span><span class="err">url</span><span class="w">
</span><span class="err">labels(first:5)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">edges</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">node</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">name</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>Here we specify the <code class="language-plaintext highlighter-rouge">title</code>, <code class="language-plaintext highlighter-rouge">url</code>, and <code class="language-plaintext highlighter-rouge">labels</code> fields of the <code class="language-plaintext highlighter-rouge">Issue</code> object.</p>

<p>The <code class="language-plaintext highlighter-rouge">labels</code> field has the type <a href="https://docs.github.com/en/free-pro-team@latest/v4/object/labelconnection">LabelConnection</a>. As with the <code class="language-plaintext highlighter-rouge">issues</code> object, because <code class="language-plaintext highlighter-rouge">labels</code> is a connection, we must travel its <code class="language-plaintext highlighter-rouge">edges</code> to a connected <code class="language-plaintext highlighter-rouge">node</code>: the <code class="language-plaintext highlighter-rouge">label</code> object. At the node, we can specify the <code class="language-plaintext highlighter-rouge">label</code> object fields we want to return, in this case, <code class="language-plaintext highlighter-rouge">name</code>.</p>

<p>In <code class="language-plaintext highlighter-rouge">gh</code>, the <code class="language-plaintext highlighter-rouge">--field</code> flag behaves like <code class="language-plaintext highlighter-rouge">--raw-field</code> with magic type conversion based on the format of the value:</p>

<ul>
  <li>literal values ‚Äútrue‚Äù, ‚Äúfalse‚Äù, ‚Äúnull‚Äù, and integer numbers get converted to appropriate JSON types;</li>
  <li>placeholder values ‚Äú:owner‚Äù, ‚Äú:repo‚Äù, and ‚Äú:branch‚Äù get populated with values from the repository of the current directory;</li>
  <li>if the value starts with ‚Äú@‚Äù, the rest of the value is interpreted as a filename to read the value from. Pass ‚Äú-‚Äú to read from standard input.</li>
</ul>

<p>For GraphQL requests, all fields other than ‚Äúquery‚Äù and ‚ÄúoperationName‚Äù are interpreted as GraphQL variables.</p>

<p>Execution:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="rouge-code"><pre>‚ûú  gh api graphql --paginate -F query=@gh-api-example.graphql | jq .
{
  "data": {
    "repository": {
      "issues": {
        "edges": [
          {
            "node": {
              "title": "Revisi√≥n",
              "url": "https://github.com/ULL-MII-SYTWS-2021/p01-t1-iaas-alu0101040882/issues/2",
              "labels": {
                "edges": [
                  {
                    "node": {
                      "name": "enhancement"
                    }
                  }
                ]
              }
            }
          }
        ]
      }
    }
  }
}
</pre></td></tr></tbody></table></code></pre></div></div>

<!--
## Descripci√≥n de la pr√°ctica p6-t1-gh-cli

[Descripci√≥n de la pr√°ctica gh-cli](/practicas/p6-t1-gh-cli)
-->

<h3 id="mutation-example">Mutation Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td class="rouge-code"><pre>‚ûú  graphql-learning git:(main) cat findissueid.bash 
gh api graphql --paginate --field query=@findissueid.gql
‚ûú  graphql-learning git:(main) cat findissueid.gql 
query FindIssueID {
  repository(owner:"crguezl", name:"learning-graphql-with-gh") {
    issue(number:2) {
      id
    }
  }
}
‚ûú  graphql-learning git:(main) cat viewissue.bash 
gh issue -R crguezl/learning-graphql-with-gh view $@%                                                
‚ûú  graphql-learning git:(main) cat addreactiontoissue.bash 
#!/bin/bash
# See
# https://docs.github.com/en/graphql/guides/forming-calls-with-graphql#example-mutation 
# and
# https://docs.github.com/en/enterprise-server@3.0/graphql/guides/forming-calls-with-graphql
# for a list of supported emojis
gh api graphql --paginate --field query=@addreactiontoissue.gql 
‚ûú  graphql-learning git:(main) cat addreactiontoissue.gql 
mutation AddReactionToIssue {
  addReaction(input:{subjectId:"I_kwDOGLyMF84838wt",content:ROCKET}) {
    reaction {
      content
    }
    subject {
      id
    }
  }
}
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="extensions">Extensions</h2>

<p>GitHub CLI extensions are repositories that provide additional gh commands.</p>

<p>The name of the extension repository must start with ‚Äúgh-‚Äú and it must contain an executable of the same name. All arguments passed to the gh <extname> invocation will be forwarded to the gh-<extname> executable of the extension.</extname></extname></p>

<ul>
  <li>gh extension subcommands
    <ul>
      <li>create:     Create a new extension</li>
      <li>install:    Install a gh extension from a repository</li>
      <li>list:       List installed extension commands</li>
      <li>remove:     Remove an installed extension</li>
      <li>upgrade:    Upgrade installed extensions</li>
    </ul>
  </li>
</ul>

<p>gh extensions repos are stored in <code class="language-plaintext highlighter-rouge">~/.local/share/gh/extensions/</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>‚ûú  gh-learning git:(master) ‚úó ls -la ~/.local/share/gh/extensions/
total 0
drwxr-xr-x  7 casianorodriguezleon  staff  224  6 oct 10:11 .
drwxr-xr-x  3 casianorodriguezleon  staff   96 17 sep 13:07 ..
drwxr-xr-x  7 casianorodriguezleon  staff  224  6 oct 10:11 gh-clone-org
drwxr-xr-x  5 casianorodriguezleon  staff  160  1 oct 17:18 gh-delete-repo
lrwxr-xr-x  1 casianorodriguezleon  staff   89  1 oct 16:23 gh-gitpod-open -&gt; /Users/casianorodriguezleon/campus-virtual/shared/2021learning/gh-learning/gh-gitpod-open
drwxr-xr-x  8 casianorodriguezleon  staff  256 17 sep 13:07 gh-gp
drwxr-xr-x  8 casianorodriguezleon  staff  256 17 sep 13:19 gh-project
</pre></td></tr></tbody></table></code></pre></div></div>

<p>See also:</p>

<ul>
  <li><a href="https://docs.github.com/es/github-cli/github-cli/creating-github-cli-extensions">Creating GitHub CLI extensions</a></li>
  <li><a href="https://github.com/topics/gh-extension">gh-extension</a> list</li>
</ul>

<h3 id="example-of-an-extension-gh-clone-org">Example of an extension: gh-clone-org</h3>

<ul>
  <li><a href="https://github.com/crguezl/gh-clone-org">crguezl/gh-clone-org</a></li>
  <li>Original <a href="https://github.com/matt-bartel/gh-clone-org">matt-bartel/gh-clone-org</a></li>
</ul>

<p>How it works:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>[/tmp/chuchu]$rm  gh clone-org -s set-up -y -n
Retrieving the list of repositories: search/repositories?q=org%3AULL-MII-SYTWS-2122%20set-up
This would have cloned the following 5 repositories to /tmp/chuchu:
ULL-MII-SYTWS-2122/set-up-alu0100898293
ULL-MII-SYTWS-2122/set-up-PaulaExposito
ULL-MII-SYTWS-2122/set-up-alu0101102726
ULL-MII-SYTWS-2122/set-up-crguezl
ULL-MII-SYTWS-2122/set-up-Pmolmar
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="running-manually-github-workflows-with-gh">Running Manually GitHub Workflows with gh</h2>

<ul>
  <li><a href="gh-workflows">Running Manually GitHub Workflows with gh</a></li>
</ul>

<h2 id="pr√°cticas">Pr√°cticas</h2>

<ul>
  <li><a href="/practicas/06p6-t1-gh-cli">GitHub cli: alias and extensions</a></li>
</ul>

<h2 id="references">References</h2>

<ul>
  <li><a href="https://github.com/crguezl/learning-graphql-with-gh">Repo crguezl/learning-graphql-with-gh</a></li>
  <li><a href="https://cli.github.com/manual/">gh manual</a></li>
  <li><a href="https://docs.github.com/en/rest">GitHub REST API</a></li>
  <li><a href="https://docs.github.com/en/rest/guides/getting-started-with-the-rest-api">Getting started with the REST API</a></li>
  <li><a href="https://github.blog/2021-03-11-scripting-with-github-cli/">Scripting with GitHub CLI by Mislav Marohniƒá</a></li>
  <li>Blog: <a href="https://blog.bitsrc.io/github-cli-is-now-available-heres-why-you-should-be-excited-91d8bdd81a51">GitHub CLI is Now Available: Here‚Äôs Why You Should Be Excited by 
Kasun Rajapakse</a></li>
  <li><a href="https://www.cloudbees.com/blog/an-introduction-to-graphql-via-the-github-api">An Introduction to GraphQL via the GitHub API</a>  by Derek Haynes
*<a href="https://docs.github.com/en/graphql/overview/explorer">GitHub GraphQL Playground</a></li>
</ul>


                
            </div>
  
                        
<h2>Comment with GitHub Utterances</h2>
            
<script src="https://utteranc.es/client.js"
        repo="ULL-MII-SYTWS/ull-mii-sytws.github.io"
        issue-term="pathname"
        label="SYTWS"
        theme="dark-blue"
        crossorigin="anonymous"
        async>
</script>
            



 
            <!-- -->
            <!-- end bar -->

            <!-- Mathjax Support  -->
            <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>


        </section>
    </div>


    
</body>

</html>
